<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hsc.mapper.BoardMapper">

    <sql id="boardColumns">
             idx
           , evtNm
           , stDate
           , edDate
           , contents
           , place
           , endYn
           , regDate
           , uptDate
    </sql>
    
    <insert id="insertBoard" parameterType="com.hsc.domain.BoardDTO">
      INSERT INTO tbl_event(
             <include refid="boardColumns" />
      ) VALUES (
        #{idx}
      , #{evtNm}
      , #{stDate}
      , #{edDate}
      , #{contents}
      , #{place}
      , 'N'
      , NOW()
      , NULL 
      )
      
    </insert>
    
    <select id="selectBoardDetail" parameterType="long" resultType="BoardDTO">

      SELECT
           <include refid="boardColumns" />
      FROM
         tbl_event
      WHERE
        idx = #{idx}
          
    </select>
    
    <update id="updateBoard" parameterType="BoardDTO">
        UPDATE tbl_event
        SET
            evtNm    = #{evtNm}
          , stDate   = #{stDate}
          , edDate   = #{edDate}
          , contents = #{contents}
          , place    = #{place}
          , endYn    = #{endYn}
          , uptDate  = NOW()
        WHERE idx    = #{idx}
    </update>
    
    <update id="deleteBoard" parameterType="BoardDTO">
        UPDATE tbl_event
        SET
            endYn  = 'Y'
          , uptDate = NOW()
        WHERE idx = #{idx}
    </update>
    
    <select id="selectBoardList" parameterType="BoardDTO"  resultType="BoardDTO">
        SELECT
           <include refid="boardColumns" />
        FROM
            tbl_event
        WHERE endYn='N'
        <include refid="CommonMapper.search" />
        ORDER BY
          idx DESC,
          regDate ASC
        <include refid="CommonMapper.paging" />
    </select>
    
    <select id="selectBoardTotalCount" parameterType="BoardDTO"  resultType="int">
        SELECT
            COUNT(*)
        FROM
            tbl_event
        WHERE endYn='N'
        <include refid="CommonMapper.search" />
    </select>
    
    
</mapper>